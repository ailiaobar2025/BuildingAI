# 图片生成功能使用说明

## 访问方式

图片生成功能已经实现，可以通过以下方式访问：

### 方式一：直接访问URL

在浏览器中访问：`http://localhost:3000/console/image-generation`

### 方式二：通过菜单添加（需要管理员权限）

1. 登录管理后台
2. 进入 **系统设置 -> 菜单管理**
3. 添加新菜单项：
   - 菜单名称：`图片生成`
   - 菜单类型：`菜单`
   - 路由地址：`/console/image-generation`
   - 图标：`i-lucide-image`（或其他图标）
   - 排序：自定义
   - 父级菜单：可以放在AI相关菜单下

## 功能说明

### 1. 文生图（Text to Image）

根据文本描述生成图片：

1. 在"描述提示词"输入框中输入你想要生成的图片描述
   - 例如：`一只可爱的小猫在花园里玩耍`
   - 例如：`科幻风格的城市夜景，霓虹灯闪烁`
2. 设置图片尺寸（宽度和高度）
3. 点击"开始生成"按钮
4. 等待生成完成（通常需要10-30秒）
5. 生成成功后可以下载图片或复制链接

### 2. 图生图（Image to Image）

基于参考图片和文本描述生成新图片：

1. 点击"添加参考图片"按钮
2. 输入参考图片的URL（最多10张）
3. 在"描述提示词"中输入你想要的修改描述
   - 例如：`改成卡通风格`
   - 例如：`添加更多细节`
4. 设置图片尺寸
5. 点击"开始生成"按钮
6. 等待生成完成

### 3. 参数说明

| 参数 | 说明 | 默认值 | 范围 |
|------|------|--------|------|
| 描述提示词 | 图片内容描述（必填） | - | 1-800字符 |
| 参考图片 | 参考图片URL列表（可选） | - | 最多10张 |
| 宽度 | 生成图片的宽度 | 1024 | 512-2048 |
| 高度 | 生成图片的高度 | 1024 | 512-2048 |

## 使用技巧

### 1. 提示词编写技巧

**好的提示词示例：**
- ✅ "一只橘色的小猫，坐在木质窗台上，阳光透过窗户洒在它身上，温馨的室内场景"
- ✅ "赛博朋克风格的城市街道，霓虹灯广告牌，雨天夜晚，电影感构图"
- ✅ "水彩画风格的山水画，远山、近水、小船，中国传统绘画风格"

**不好的提示词示例：**
- ❌ "猫"（过于简单）
- ❌ "一只猫一只狗还有一朵花和一座山还有..."（过于复杂）

### 2. 常见问题

**Q: 生成速度慢怎么办？**
A: 图片生成需要时间，通常10-30秒。如果超过1分钟，可能是服务繁忙，建议稍后重试。

**Q: 生成失败怎么办？**
A: 可能原因：
- 提示词包含敏感内容（系统会自动审核）
- 网络连接问题
- API服务暂时不可用

解决方法：
- 修改提示词，避免敏感内容
- 检查网络连接
- 稍后重试

**Q: 如何生成高质量图片？**
A: 建议：
- 使用详细、具体的描述
- 指定画面风格（如：写实、卡通、油画等）
- 描述光线、色调等细节
- 使用较大的图片尺寸（如1024x1024或更大）

**Q: 图片生成有数量限制吗？**
A: 根据您的账户配额和API服务提供商的限制，可能会有调用次数限制。请合理使用。

## 技术架构

- **后端服务**: NestJS + 火山引擎即梦4.0 API
- **前端界面**: Vue 3 + Nuxt 3 + Nuxt UI
- **API路径**: `/api/image-generation/submit` 和 `/api/image-generation/query`

## 配置要求

确保后端环境变量已配置：

```bash
VOLCENGINE_IMAGE_ENDPOINT=https://cv.volcengineapi.com
VOLCENGINE_IMAGE_REGION=cn-north-1
VOLCENGINE_IMAGE_SERVICE=cv
VOLCENGINE_IMAGE_ACCESS_KEY_ID=your_access_key_id
VOLCENGINE_IMAGE_SECRET_ACCESS_KEY=your_secret_access_key
VOLCENGINE_IMAGE_DEFAULT_REQ_KEY=i2i_general_v3.0
```

## 注意事项

1. ⚠️ **内容审核**：所有生成内容都会经过审核，违规内容将被拒绝
2. ⚠️ **调用频率**：请合理控制调用频率，避免触发限流
3. ⚠️ **数据安全**：生成的图片链接可能有有效期，请及时下载保存
4. ⚠️ **成本控制**：图片生成会消耗API配额，请注意成本控制

## 更多信息

- 后端实现文档：`apps/server/src/modules/web/ai/README_IMAGE_GENERATION.md`
- API文档：查看后端服务的Swagger文档
- 问题反馈：请联系技术支持团队
